-- Khai báo các dịch vụ
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local VirtualUser = game:GetService("VirtualUser")
local localPlayer = Players.LocalPlayer
local character = localPlayer.Character or localPlayer.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
local backpack = localPlayer:FindFirstChild("Backpack")

task.spawn(function()
    while true do
        task.wait()
        if currentTarget and currentTarget.Character and currentTarget.Character:FindFirstChild("HumanoidRootPart") then
            local mouse = localPlayer:GetMouse()
            mouse.Target = currentTarget.Character.HumanoidRootPart
        end
    end
end)

humanoid.WalkSpeed = 0
humanoid.JumpPower = 0
game.Workspace.Gravity = 0

local screenGui = Instance.new("ScreenGui")
screenGui.Parent = game.CoreGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 250, 0, 150)
frame.Position = UDim2.new(0.5, -125, 0.2, 0)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 0, 30)
titleLabel.Text = "DINO AUTOBOUNTY"
titleLabel.TextColor3 = Color3.new(1, 1, 1)
titleLabel.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
titleLabel.Parent = frame

local nextPlayerButton = Instance.new("TextButton")
nextPlayerButton.Size = UDim2.new(1, 0, 0, 40)
nextPlayerButton.Position = UDim2.new(0, 0, 0, 40)
nextPlayerButton.Text = "Start"
nextPlayerButton.TextColor3 = Color3.new(1, 1, 1)
nextPlayerButton.BackgroundColor3 = Color3.fromRGB(70, 130, 180)
nextPlayerButton.Parent = frame

local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(1, 0, 0, 40)
closeButton.Position = UDim2.new(0, 0, 0, 90)
closeButton.Text = "Close"
closeButton.TextColor3 = Color3.new(1, 1, 1)
closeButton.BackgroundColor3 = Color3.fromRGB(255, 69, 58)
closeButton.Parent = frame

local function getNearestPlayer()
    local closestPlayer = nil
    local closestDistance = math.huge
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= localPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local distance = (player.Character.HumanoidRootPart.Position - humanoidRootPart.Position).Magnitude
            if distance < closestDistance then
                closestDistance = distance
                closestPlayer = player
            end
        end
    end
    return closestPlayer
end

local function tweenToPosition(part, position)
    local distance = (part.Position - position).Magnitude
    local speed = 300
    local time = distance / speed
    local tweenInfo = TweenInfo.new(math.max(time, 0.02), Enum.EasingStyle.Linear, Enum.EasingDirection.Out)
    local tweenGoal = {CFrame = CFrame.new(position)}
    local tween = TweenService:Create(part, tweenInfo, tweenGoal)
    tween:Play()
end

local function equipFirstItem()
    if backpack then
        for _, item in pairs(backpack:GetChildren()) do
            if item:IsA("Tool") then
                item.Parent = character
                break
            end
        end
    end
end

local function fastAttack()
    spawn(function()
        while currentTarget do
            if currentTarget and currentTarget.Character and currentTarget.Character:FindFirstChild("Humanoid") then
                VirtualUser:CaptureController()
                VirtualUser:ClickButton1(Vector2.new(0, 0))
                wait(0.001) 
            end
        end
    end)
end

local function autoAttack()
    equipFirstItem()
    fastAttack()
end

local function enableNoClip()
    RunService.Stepped:Connect(function()
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") or part:IsA("MeshPart") then
                part.CanCollide = false
                part.Transparency = 1
            end
        end
    end)
end

enableNoClip()

local currentTarget = nil
RunService.Heartbeat:Connect(function()
    if humanoid.Health <= 5000 then
        local safePosition = humanoidRootPart.Position + Vector3.new(math.random(-1000, 1000), 100, math.random(-1000, 1000))
        tweenToPosition(humanoidRootPart, safePosition)
    elseif humanoid.Health > 10000 and currentTarget and currentTarget.Character and currentTarget.Character:FindFirstChild("HumanoidRootPart") then
        local targetRoot = currentTarget.Character.HumanoidRootPart
        tweenToPosition(humanoidRootPart, targetRoot.Position + Vector3.new(0, 3, 0))
    end
end)

nextPlayerButton.MouseButton1Click:Connect(function()
    currentTarget = getNearestPlayer()
    if currentTarget then
        autoAttack()
    end
end)

closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
    currentTarget = nil
    humanoid.WalkSpeed = 75
    humanoid.JumpPower = 100
    game.Workspace.Gravity = 196.2
end)

print("✅ Script chạy hoàn hảo!")
